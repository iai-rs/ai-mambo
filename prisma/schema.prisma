generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model users {
  id                         String  @id @db.VarChar(255)
  name                       String  @db.VarChar(255)
  email                      String  @unique @db.VarChar(255)
  password                   String? @db.VarChar(255)
  change_password_secret_key String? @db.VarChar(255)
}

model DicomMetadata {
  mammography_id     String         @id(map: "dicom_metadata_pk") @default(uuid())
  patient_name       String?
  patient_id         String
  acquisition_date   String?
  acquisition_time   String?
  view               String?
  laterality         String?
  implant            String?
  manufacturer       String?
  manufacturer_model String?
  institution        String?
  biradsResults      BiradsResults? @relation(fields: [mammography_id], references: [study_uid]) // TODO: name birads_study_uid

  @@map("dicom_metadata")
}

model BiradsResults {
  study_uid      String         @unique // TODO: check with GPT if ID
  model_1_result Decimal        @db.Decimal
  patient_name   String?        @db.VarChar(255)
  id             Int            @id @default(autoincrement())
  dicomMetadata  DicomMetadata?

  @@map("birads_results")
}
